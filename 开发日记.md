# 2025/4/20

## ✨ 功能描述（优化版）

本模块用于实现 **普通用户（游客）通过 QQ 登录后提交“加入我们”的申请表**，由后台管理员审核申请流程。

- 普通用户通过 QQ 登录后可以填写申请表，仅可针对 **同一职位** 提交一次申请。
- 若该申请被管理员打回（审核不通过），用户可再次提交新的申请表。
- 后台管理员拥有所有申请表的查看与审核权限，可对申请表进行“通过”或“不通过”的操作。

------

## 🧩 数据模型设计（Model）

### 🧑‍💻 普通用户表（User）

| 字段名     | 类型     | 说明                                       |
| ---------- | -------- | ------------------------------------------ |
| id         | uint     | 主键，自增                                 |
| qq_api     | string   | QQ 接口返回的唯一标识（OpenID 或 UnionID） |
| username   | string   | 用户昵称                                   |
| created_at | datetime | 注册时间，便于后续运营分析                 |

------

### 📝 申请表（JoinApply）

| 字段名         | 类型     | 说明                                                       |
| -------------- | -------- | ---------------------------------------------------------- |
| id             | uint     | 主键，自增                                                 |
| qq_number      | string   | QQ 号                                                      |
| student_number | string   | 学号                                                       |
| apply          | int      | 申请职位（如 0-队员、1-组织委员、2-宣传委员、3、网站运维） |
| name           | string   | 真实姓名                                                   |
| text           | string   | 申请理由或自我介绍                                         |
| state          | int      | 状态（0=待审核，1=不通过，2=通过）                         |
| user_id        | uint     | 外键，关联到普通用户表                                     |
| created_at     | datetime | 申请时间（便于管理和数据分析）                             |

------

## 🔌 API 设计

| 方法 | 路由               | 权限   | 说明                       |
| ---- | ------------------ | ------ | -------------------------- |
| POST | `/api/qqlogin`     | 公共   | 用户通过 QQ 登录           |
| POST | `/api/join/send`   | 用户   | 提交申请表                 |
| GET  | `/api/join/my`     | 用户   | 当前用户查询自己的申请记录 |
| GET  | `/api/join/get`    | 管理员 | 获取所有申请表列表         |
| GET  | `/api/join/:id`    | 管理员 | 管理员查看申请详情         |
| PUT  | `/api/join/ac/:id` | 管理员 | 审核通过某一申请表         |
| PUT  | `/api/join/wa/:id` | 管理员 | 审核不通过某一申请表       |



